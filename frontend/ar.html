<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>AR Measurement</title>

  <link rel="stylesheet" href="css/style.css" />
  <style>
    body,html{height:100%;margin:0;background:#000}
    .ui-overlay{position:fixed;left:12px;right:12px;top:12px;display:flex;gap:8px;z-index:9999;pointer-events:none}
    .controls{pointer-events:auto;display:flex;gap:8px}
    .btn{background:rgba(0,0,0,0.6);color:white;padding:8px 12px;border-radius:8px;font-family:sans-serif;font-size:14px;border:none}
    .distance-box{margin-left:auto;background:rgba(0,0,0,0.6);color:#fff;padding:6px 10px;border-radius:8px;font-weight:600;font-family:sans-serif;pointer-events:auto}
    canvas{touch-action:none}
    #mv-fallback{display:none;width:100%;height:100%}
    .instructions{position:fixed;bottom:12px;left:12px;right:12px;color:#fff;font-family:sans-serif;text-align:center;z-index:9999}
  </style>
</head>

<body>

  <div class="ui-overlay">
    <div class="controls">
      <button id="resetBtn" class="btn">Reset</button>
      <button id="helpBtn" class="btn">Help</button>
      <button id="openARBtn" class="btn" style="display:none">Open AR</button>
    </div>
    <div id="distance" class="distance-box">—</div>
  </div>

  <div id="mv-fallback">
    <model-viewer id="modelViewer"
      style="width:100%;height:100%;"
      src="3d/ruler.glb"
      ios-src="3d/ruler.usdz"
      ar
      ar-modes="quick-look scene-viewer webxr"
      interaction-prompt="auto"
      camera-controls></model-viewer>

    <div id="fallback-ui" style="position:fixed;left:12px;bottom:80px;z-index:10000;display:flex;gap:8px;">
      <button id="startManual" class="btn">Manual Measure</button>
      <button id="placePoint" class="btn" disabled>Place Point</button>
      <div id="fallback-distance" class="distance-box">—</div>
    </div>
  </div>

  <div class="instructions" id="instructions">Detecting AR capability...</div>

  <script type="module" src="js/main.js"></script>

</body>
</html>
